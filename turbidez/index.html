<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Repositorio dedicado al tema de prueba de todo tipo de cosas relacionadas con las placas tipo Arduino fundamentalmente de Keyestudio en sus distintas versiones."><meta name=author content="Federico Coca"><link href=https://fgcoca.github.io/Sensores-actuadores-y-shield-tipo-Arduino/turbidez/ rel=canonical><link rel=icon href=../img/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-8.1.11"><title>Sensor de turbidez - Sensores actuadores y shield tipo Arduino</title><link rel=stylesheet href=../assets/stylesheets/main.50e68009.min.css><link rel=stylesheet href=../assets/stylesheets/palette.e6a45f82.min.css><meta name=theme-color content=#02a6f2><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=light-blue data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#sensor-de-turbidez class=md-skip> Saltar a contenido </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Cabecera> <a href=.. title="Sensores actuadores y shield tipo Arduino" class="md-header__button md-logo" aria-label="Sensores actuadores y shield tipo Arduino" data-md-component=logo> <img src=../img/favicon.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Sensores actuadores y shield tipo Arduino </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Sensor de turbidez </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Búsqueda placeholder=Búsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Limpiar tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inicializando búsqueda </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/fgcoca/Sensores-actuadores-y-shield-tipo-Arduino title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Sensores-actuadores-y-shield-tipo-Arduino </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navegación data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Sensores actuadores y shield tipo Arduino" class="md-nav__button md-logo" aria-label="Sensores actuadores y shield tipo Arduino" data-md-component=logo> <img src=../img/favicon.png alt=logo> </a> Sensores actuadores y shield tipo Arduino </label> <div class=md-nav__source> <a href=https://github.com/fgcoca/Sensores-actuadores-y-shield-tipo-Arduino title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Sensores-actuadores-y-shield-tipo-Arduino </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Introducción </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_2 type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2> Introducción a ArduinoBlocks <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Introducción a ArduinoBlocks" data-md-level=1> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Introducción a ArduinoBlocks </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../crear-cuenta-gmail/ class=md-nav__link> Crear cuenta en Gmail </a> </li> <li class=md-nav__item> <a href=../crear-cuenta-AB/ class=md-nav__link> Crear cuenta en ArduinoBlocks </a> </li> <li class=md-nav__item> <a href=../primeros-AB/ class=md-nav__link> Primeros pasos con AB </a> </li> <li class=md-nav__item> <a href=../plataformaAB/ class=md-nav__link> Plataforma AB </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Sensor de turbidez <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Sensor de turbidez </a> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#descripcion class=md-nav__link> Descripción </a> </li> <li class=md-nav__item> <a href=#especificaciones class=md-nav__link> Especificaciones </a> </li> <li class=md-nav__item> <a href=#curvas-caracteristicas class=md-nav__link> Curvas características </a> </li> <li class=md-nav__item> <a href=#ejemplos-de-uso-del-sensor class=md-nav__link> Ejemplos de uso del sensor </a> <nav class=md-nav aria-label="Ejemplos de uso del sensor"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lectura-digital-calibracion class=md-nav__link> Lectura digital. Calibración </a> </li> <li class=md-nav__item> <a href=#lectura-basica-analogica class=md-nav__link> Lectura básica analógica </a> </li> <li class=md-nav__item> <a href=#lectura-en-unidades-nefelometricas-de-turbidez-ntu class=md-nav__link> Lectura en Unidades Nefelométricas de turbidez (NTU) </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../ccs811/ class=md-nav__link> Sensor CCS811 de eCO2, TVOC y temperatura </a> </li> <li class=md-nav__item> <a href=../ESP01/ class=md-nav__link> Modulo ESP8266 ESP 01, shield de programación y dirección MAC </a> </li> <li class=md-nav__item> <a href=../panel-easy-plug/ class=md-nav__link> Panel de sensores Easy Plug </a> </li> <li class=md-nav__item> <a href=../panel-I2C/ class=md-nav__link> Panel de sensores I2C </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Miscelanea <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Miscelanea data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Miscelanea </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Miscelanea/about/ class=md-nav__link> Autor </a> </li> <li class=md-nav__item> <a href=../Miscelanea/lic/ class=md-nav__link> Licencias </a> </li> <li class=md-nav__item> <a href=../Miscelanea/webgrafia/ class=md-nav__link> Webgrafia/Bibliografía </a> </li> <li class=md-nav__item> <a href=../Miscelanea/soft/ class=md-nav__link> Software utilizado </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#descripcion class=md-nav__link> Descripción </a> </li> <li class=md-nav__item> <a href=#especificaciones class=md-nav__link> Especificaciones </a> </li> <li class=md-nav__item> <a href=#curvas-caracteristicas class=md-nav__link> Curvas características </a> </li> <li class=md-nav__item> <a href=#ejemplos-de-uso-del-sensor class=md-nav__link> Ejemplos de uso del sensor </a> <nav class=md-nav aria-label="Ejemplos de uso del sensor"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lectura-digital-calibracion class=md-nav__link> Lectura digital. Calibración </a> </li> <li class=md-nav__item> <a href=#lectura-basica-analogica class=md-nav__link> Lectura básica analógica </a> </li> <li class=md-nav__item> <a href=#lectura-en-unidades-nefelometricas-de-turbidez-ntu class=md-nav__link> Lectura en Unidades Nefelométricas de turbidez (NTU) </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=sensor-de-turbidez><font color=#8B008B>Sensor de turbidez</font><a class=headerlink href=#sensor-de-turbidez title="Permanent link">&para;</a></h1> <h2 id=descripcion><font color=#007575>Descripción</font><a class=headerlink href=#descripcion title="Permanent link">&para;</a></h2> <p>Se trata del <a href=https://wiki.keyestudio.com/KS0414_Keyestudio_Turbidity_Sensor_V1.0>KS0414 Keyestudio Turbidity Sensor V1.0</a> del que disponemos en su wiki de toda la información. El funcionamiento del sensor de turbidez está basado en el efecto Tyndall, el cual describe que la dispersión de la luz proyectada en un líquido con partículas suspendidas será mayor cuanto mayor sea el número de partículas.</p> <p>El módulo consta de una placa amplificadora y un sensor, tal y como vemos en la imagen siguiente:</p> <p><center></p> <table> <thead> <tr> <th align=center>Elementos del sensor de turbidez</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Elementos del sensor de turbidez" src=../img/Sensor-turbidez/sensor.png></td> </tr> </tbody> </table> <p></center></p> <p>Tiene un rango de detección de entre 0% y 3.5% (0 y 4550 NTU), con un margen de error de ±0.5%. La turbidez se mide en Unidades Nefelométricas de turbidez, o Nephelometric Turbidity Unit (NTU) y el instrumento usado para su medida es el nefelómetro o turbidímetro.</p> <p>El sensor dispone de dos modos de operación o dos tipos de señal de salida, analógica y digital. En el modo analógico el cálculo de la turbidez del agua se realiza a partir del nivel de tensión medido por el sensor. El modo de operación se selecciona mediante un interruptor deslizante, siendo la posición A la correspondiente al analógico y D el digital. Lógicamente la posición del interruptor determina la patilla a la que debemos conectarlo. La resistencia ajustable de color azul permite ajustar la sensibilidad del sensor.</p> <p><center><font color=red><strong>Debemos tener muy presente que la parte superior de la sonda no es sumergible.</font></strong></center></p> <h2 id=especificaciones><font color=#007575>Especificaciones</font><a class=headerlink href=#especificaciones title="Permanent link">&para;</a></h2> <ul> <li>Tensión de alimentación: 5V DC</li> <li>Consumo: 11mA aproximadamente</li> <li>Rango de detección: 0% a -3.5%（0-4550 NTU）</li> <li>Temperatura de trabajo: -30 ℃~ 80 ℃</li> <li>Temperatura de almacenamiento：-10 ℃ ~ 80 ℃</li> <li>Margen de error: ±0.5%</li> <li>Peso: 18g</li> </ul> <h2 id=curvas-caracteristicas><font color=#007575>Curvas características</font><a class=headerlink href=#curvas-caracteristicas title="Permanent link">&para;</a></h2> <p>En la imagen vemos dos gráficas que establecen la relación entre la turbidez y la tensión medida por el sensor. La de la derecha es más precisa y además nos da directamente la medida en NTU por lo que será la que usemos en nuestros ejemplos.</p> <p><center></p> <table> <thead> <tr> <th align=center>Relaciones tensión medida - turbidez</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Relaciones tensión medida - turbidez" src=../img/Sensor-turbidez/relaciones.png></td> </tr> </tbody> </table> <p></center></p> <h2 id=ejemplos-de-uso-del-sensor><font color=#007575>Ejemplos de uso del sensor</font><a class=headerlink href=#ejemplos-de-uso-del-sensor title="Permanent link">&para;</a></h2> <p>Vamos a ver la aplicación analógica y digital del sensor y haremos las pruebas sobre un set preparado con tres grados de turbidez a partir de agua del grifo, turbidez media y alta creadas a partir de la disolución de café en agua. En la figura siguiente vemos el aspecto.</p> <p><center></p> <table> <thead> <tr> <th align=center>Tres grados de turbidez</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Tres grados de turbidez" src=../img/Sensor-turbidez/vasos.png></td> </tr> </tbody> </table> <p></center></p> <h3 id=lectura-digital-calibracion><font color=#AA0000>Lectura digital. Calibración</font><a class=headerlink href=#lectura-digital-calibracion title="Permanent link">&para;</a></h3> <ul> <li><strong>POSICIÓN DEL INTERRUPTOR: D</strong></li> </ul> <p>Vamos a realizar la prueba mas sencilla del sensor que nos servirá para su calibración. Se trata de realizar el siguiente programa:</p> <hr> <div class=highlight><pre><span></span><code>/* ----------------------------------------------------------------------------------------------------------  
// Programa...: Lectura-digital.ino   
// Autor......: @fgcoca (octubre-2019)  
// Descripción: Visualización en el LED onboard (pin 13) del ajuste del potenciometro cómo valor digital.  
// ---------------------------------------------------------------------------------------------------------- */  
#define Turbidy_sensor 2 //Conectamos el sensor al pin digital 2  
//Poner el interruptor el posición D  
const int ledPin = 13; //Led onboard  

void setup() {  
  pinMode(ledPin, OUTPUT); //Configuramos pin 13 como salida  
  pinMode(Turbidy_sensor, INPUT); //Configuramos el pin del sensor de turbidez como entrada  
}  
void loop() {  
  if(digitalRead(Turbidy_sensor)==LOW){  //Lectura de la señal del sensor  
    digitalWrite(ledPin, HIGH);  //Si el sensor indica nivel bajo (LOW) encendemos el LED  
  }  
  else{  
    digitalWrite(ledPin, LOW);    //Si el sensor indica nivel alto (HIGH) encendemos el LED  
  }  
}  
</code></pre></div> <hr> <p>El montaje lo vemos en la imagen siguiente:</p> <p><center></p> <table> <thead> <tr> <th align=center>Montaje para lectura digital</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Montaje para lectura digital" src=../img/Sensor-turbidez/Montaje-digital.png></td> </tr> </tbody> </table> <p></center></p> <p>Introducimos el sensor en agua limpia (si es agua destilada será más fiable la calibración) y vamos retocando la posición del potenciometro hasta que el diodo LED asociado al pin 13 se encienda o se apague dependiendo de la posición en la que estuviese. Justo en el momento del cambio debemos girarlo muy suavemente hasta que el LED permanezca apagado. Probamos a introducir el sensor en las muestras turbias para comprobar que el el LED se enciende. Esta será la posición de calibrado que comprobaremos en el siguiente ejemplo.</p> <p>Puedes descargar el archivo <a href=../Programas/Sensor-turbidez/Lectura-digital/Lectura-digital.ino>Lectura-digital.ino</a> si te resulta más cómodo.</p> <h3 id=lectura-basica-analogica><font color=#AA0000>Lectura básica analógica</font><a class=headerlink href=#lectura-basica-analogica title="Permanent link">&para;</a></h3> <ul> <li><strong>POSICIÓN DEL INTERRUPTOR: A</strong></li> </ul> <p>El siguiente código escrito en el IDE de Arduino nos permite obtener lecturas básicas del sensor y enviarlas al monitor serie.</p> <hr> <div class=highlight><pre><span></span><code>/* ----------------------------------------------------------------------------------------------------------   
// Programa...: Lectura-basica.ino   
// Autor......: @fgcoca (octubre-2019)  
// Descripción: Visualización del valor de tensión del sensor de turbidez en el terminal serie.  
// ---------------------------------------------------------------------------------------------------------- */  
#define Turbidy_sensor A0   
int TurbidySensorValue = 0;  
float Tension = 0.0;  
void setup() {  
  Serial.begin(9600); // Velocidad de comunicación  
  Serial.println(&quot;Prueba de lectura del sensor de turbidez&quot;);  
  Serial.println(&quot;========================================&quot;);  
  Serial.println(&quot; &quot;);  
  Serial.println(&quot;Lectura analogica\tTension&quot;);   
  Serial.println(&quot;-----------------\t-------&quot;);  
}  
void loop() {  
  TurbidySensorValue = analogRead(Turbidy_sensor); // Lectura del pin analógico 0  
  Tension = TurbidySensorValue * (5.0 / 1024.0); // Mapeo de la lectura analógica  
  //Envio de valores y textos al terminal serie  
  Serial.print(TurbidySensorValue);   
  Serial.print(&quot;\t\t\t&quot;);  
  Serial.print(Tension);  
  Serial.println(&quot; V&quot;);  
  delay(3000);  
}  
</code></pre></div> <hr> <p>Puedes descargar el archivo <a href=../Programas/Sensor-turbidez/Lectura-basica/Lectura-basica.ino>Lectura-basica.ino</a> si te resulta más cómodo.</p> <p>El montaje es el de la imagen siguiente:</p> <p><center></p> <table> <thead> <tr> <th align=center>Montaje para lectura analógica</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Montaje para lectura analógica" src=../img/Sensor-turbidez/Montaje-analog.png></td> </tr> </tbody> </table> <p></center></p> <p>Los resultados los vemos en la gráfica siguiente:</p> <p><center></p> <table> <thead> <tr> <th align=center>Resultados para el montaje para lectura analógica</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Resultados para el montaje para lectura analógica" src=../img/Sensor-turbidez/Lectura-tension.png></td> </tr> </tbody> </table> <p></center></p> <p>Observamos como la tensión está en un valor de 4.1 ± 0.3V para el ajuste del potenciometro realizado en el ejercicio anterior. Si hemos realizado el ajuste con agua pura y una temperatura comprendida entre 15 y 40 ºC tenemos un valor de NTU &lt; 0.5, lo que indica que el ajuste, y por tanto la calibración son correctos.</p> <h3 id=lectura-en-unidades-nefelometricas-de-turbidez-ntu><font color=#AA0000>Lectura en Unidades Nefelométricas de turbidez (NTU)</font><a class=headerlink href=#lectura-en-unidades-nefelometricas-de-turbidez-ntu title="Permanent link">&para;</a></h3> <ul> <li><strong>POSICIÓN DEL INTERRUPTOR: A</strong></li> </ul> <p>Finalmente vamos a realizar un ejercicio de medida de la turbidez del agua expresando el resultado en unidades nefelométricas. El código del programa es el siguiente:</p> <hr> <div class=highlight><pre><span></span><code>/* ----------------------------------------------------------------------------------------------------------  
// Programa...: Lectura-NTU.ino   
// Autor......: @fgcoca (octubre-2019)  
// Descripción: Visualización del valor de tensión y de turbidez en NTU en el terminal serie.  
// ---------------------------------------------------------------------------------------------------------- */  
#define Turbidy_sensor A0   
float Tension = 0.0;  
float NTU = 0.0;  
void setup() {   
  Serial.begin(9600); // Velocidad de comunicación  
  Serial.println(&quot;Lectura del sensor de turbidez y expresión del resultado en unidades nefelometricas&quot;);  
  Serial.println(&quot;===================================================================================&quot;);  
  Serial.println(&quot; &quot;);  
  Serial.println(&quot;Tension\tNTU&quot;);   
  Serial.println(&quot;-------\t---&quot;);  
}  
void loop() {  
  Tension = 0;  
  Tension = analogRead(Turbidy_sensor)/1024*5; // Mapeo de la lectura analógica  
  //Para compensar el ruido producido en el sensor tomamos 500 muestras y obtenemos la media  
  for(int i=0; i&lt;500; i++)  
    {  
      Tension += ((float)analogRead(Turbidy_sensor)/1024)*5;  
    }  
    Tension = Tension/500;  
    Tension = redondeo(Tension,1);  
    //Para ajustarnos a la gráfica de la derecha  
    if(Tension &lt; 2.5){  
      NTU = 3000;  
    }else{  
      NTU = -1120.4*square(Tension)+5742.3*Tension-4352.9;   
    }  
  //Envio de valores y textos al terminal serie  
  Serial.print(Tension);  
  Serial.print(&quot; V&quot;);  
  Serial.print(&quot;\t&quot;);  
  Serial.print(NTU);  
  Serial.println(&quot; NTU&quot;);  
  delay(5000);  
}  

float redondeo(float p_entera, int p_decimal)  
{  
  float multiplicador = powf( 10.0f, p_decimal);  //redondeo a 2 decimales  
  p_entera = roundf(p_entera * multiplicador) / multiplicador;  
  return p_entera;  
}  
</code></pre></div> <hr> <p>Puedes descargar el archivo <a href=../Programas/Sensor-turbidez/Lectura-NTU/Lectura-NTU.ino>Lectura-NTU.ino</a> si te resulta más cómodo.</p> <p>El montaje es el mismo que en el ejercicio anterior.</p> <p>Los resultados de las pruebas sobre el set de medida las vemos en la gráfica siguiente:</p> <p><center></p> <table> <thead> <tr> <th align=center>Resultados para el montaje para lectura en NTU</th> </tr> </thead> <tbody> <tr> <td align=center><img alt="Resultados para el montaje para lectura en NTU" src=../img/Sensor-turbidez/Medida-NTU.png></td> </tr> </tbody> </table> <p></center></p> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Pie> <a href=../plataformaAB/ class="md-footer__link md-footer__link--prev" aria-label="Anterior: Plataforma AB" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Anterior </span> Plataforma AB </div> </div> </a> <a href=../ccs811/ class="md-footer__link md-footer__link--next" aria-label="Siguiente: Sensor CCS811 de eCO2, TVOC y temperatura" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Siguiente </span> Sensor CCS811 de eCO2, TVOC y temperatura </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 - 2032 Federico Coca </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "translations": {"clipboard.copy": "Copiar al portapapeles", "clipboard.copied": "Copiado al portapapeles", "search.config.lang": "es", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "B\u00fasqueda", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.term.missing": "Falta", "select.version.title": "Seleccionar versi\u00f3n"}, "search": "../assets/javascripts/workers/search.092fa1f6.min.js"}</script> <script src=../assets/javascripts/bundle.5a9542cf.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script> </body> </html>